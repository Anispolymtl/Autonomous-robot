<div class="robots-grid">
  <div class="global-actions">
    <button class="action-btn btn-return" (click)="returnToBase()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
      Retour à la Base
    </button>
  </div>
  <!-- Robot 1 -->
  <div class="robot-card">
    <!-- Bouton Identifier avec texte - coin supérieur droit -->
    <button
      *ngIf="mode === 'real'"
      class="identify-btn identify-btn-limo1"
      title="Identifier Limo 1"
      (click)="identifyRobot('limo1')">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <circle cx="12" cy="12" r="1"></circle>
        <circle cx="12" cy="12" r="8"></circle>
        <path d="M12 4v4m0 4v4" stroke-linecap="round"></path>
        <path d="M4 12h4m4 0h4" stroke-linecap="round"></path>
      </svg>
      <span class="btn-text">Identifier</span>
    </button>

    <div class="robot-header">
      <div class="robot-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="10" rx="2"></rect>
          <circle cx="12" cy="5" r="2"></circle>
          <path d="M12 7v4"></path>
          <line x1="8" y1="16" x2="8" y2="16"></line>
          <line x1="16" y1="16" x2="16" y2="16"></line>
        </svg>
      </div>
      <div class="robot-info">
        <h3>Limo 1</h3>
        <span class="status-badge" [class.status-active]="robot1Status !== 'En attente'">
          {{ robot1Status }}
        </span>
      </div>
    </div>

    <div class="battery-section">
      <div class="battery-header">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect>
          <line x1="23" y1="13" x2="23" y2="11"></line>
      </svg>
      <span class="battery-label">Batterie</span>
      <span class="battery-value">{{ robot1Battery }}%</span>
    </div>
    <div class="battery-bar">
      <div 
        class="battery-fill" 
        [class.battery-low]="robot1Battery < 20"
        [class.battery-medium]="robot1Battery >= 20 && robot1Battery < 50"
        [class.battery-high]="robot1Battery >= 50"
        [style.width.%]="robot1Battery">
      </div>
    </div>
    </div>

    <div class="robot-stats">
      <div class="stat">
        <span class="stat-label">Distance</span>
        <span class="stat-value">23.5 m</span>
      </div>
      <div class="stat">
        <span class="stat-label">Temps</span>
        <span class="stat-value">2m 14s</span>
      </div>
      <div class="stat position">
        <span class="stat-label">Position</span>
        <span class="stat-value">
          <ng-container *ngIf="robot1Position; else noPos1">
            <span class="coord">x: {{ robot1Position.x | number:'1.2-2' }} m</span>
            <span class="coord">y: {{ robot1Position.y | number:'1.2-2' }} m</span>
          </ng-container>
          <ng-template #noPos1>—</ng-template>
        </span>
      </div>
      <div class="stat">
        <span class="stat-label">Etat d'exploration</span>
        <span 
          [ngClass]="{
            'text-green': robot1MissionStatus === 'Frontier Detection',
            'stat-value': robot1MissionStatus !== 'Frontier Detection'
          }">
          Frontier Detection
        </span>
        <span 
          [ngClass]="{
            'text-green': robot1MissionStatus === 'Frontier Clustering',
            'stat-value': robot1MissionStatus !== 'Frontier Clustering'
          }">
          Frontier Clustering
        </span>
        <span 
          [ngClass]="{
            'text-green': robot1MissionStatus === 'Frontier Evaluation',
            'stat-value': robot1MissionStatus !== 'Frontier Evaluation'
          }">
          Frontier Evaluation
        </span>
      </div>

    </div>
  </div>

  <!-- Robot 2 -->
  <div class="robot-card">
    <!-- Bouton Identifier avec texte - coin supérieur droit -->
    <button
      *ngIf="mode === 'real'"
      class="identify-btn identify-btn-limo2"
      title="Identifier Limo 2"
      (click)="identifyRobot('limo2')">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <circle cx="12" cy="12" r="1"></circle>
        <circle cx="12" cy="12" r="8"></circle>
        <path d="M12 4v4m0 4v4" stroke-linecap="round"></path>
        <path d="M4 12h4m4 0h4" stroke-linecap="round"></path>
      </svg>
      <span class="btn-text">Identifier</span>
    </button>

    <div class="robot-header">
      <div class="robot-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="10" rx="2"></rect>
          <circle cx="12" cy="5" r="2"></circle>
          <path d="M12 7v4"></path>
          <line x1="8" y1="16" x2="8" y2="16"></line>
          <line x1="16" y1="16" x2="16" y2="16"></line>
        </svg>
      </div>
      <div class="robot-info">
        <h3>Limo 2</h3>
        <span class="status-badge" [class.status-active]="robot2Status !== 'En attente'">
          {{ robot2Status }}
        </span>
      </div>
    </div>

    <div class="battery-section">
      <div class="battery-header">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect>
          <line x1="23" y1="13" x2="23" y2="11"></line>
      </svg>
      <span class="battery-label">Batterie</span>
      <span class="battery-value">{{ robot2Battery }}%</span>
    </div>
    <div class="battery-bar">
      <div 
        class="battery-fill" 
        [class.battery-low]="robot2Battery < 20"
        [class.battery-medium]="robot2Battery >= 20 && robot2Battery < 50"
        [class.battery-high]="robot2Battery >= 50"
        [style.width.%]="robot2Battery">
      </div>
    </div>
    </div>

    <div class="robot-stats">
      <div class="stat">
        <span class="stat-label">Distance</span>
        <span class="stat-value">0 m</span>
      </div>
      <div class="stat">
        <span class="stat-label">Temps</span>
        <span class="stat-value">0s</span>
      </div>
      <div class="stat position">
        <span class="stat-label">Position</span>
        <span class="stat-value">
          <ng-container *ngIf="robot2Position; else noPos2">
            <span class="coord">x: {{ robot2Position.x | number:'1.2-2' }} m</span>
            <span class="coord">y: {{ robot2Position.y | number:'1.2-2' }} m</span>
          </ng-container>
          <ng-template #noPos2>—</ng-template>
        </span>
      </div>
      <div class="stat">
        <span class="stat-label">Etat d'exploration</span>
        <span 
          [ngClass]="{
            'text-green': robot2MissionStatus === 'Frontier Detection',
            'stat-value': robot2MissionStatus !== 'Frontier Detection'
          }">
          Frontier Detection
        </span>
        <span 
          [ngClass]="{
            'text-green': robot2MissionStatus === 'Frontier Clustering',
            'stat-value': robot2MissionStatus !== 'Frontier Clustering'
          }">
          Frontier Clustering
        </span>
        <span 
          [ngClass]="{
            'text-green': robot2MissionStatus === 'Frontier Evaluation',
            'stat-value': robot2MissionStatus !== 'Frontier Evaluation'
          }">
          Frontier Evaluation
        </span>
      </div>
    </div>
  </div>
</div>
