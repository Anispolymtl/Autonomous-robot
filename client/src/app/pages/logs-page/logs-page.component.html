<!-- HEADER -->
<header class="header">
  <div class="header-top">
    <div class="header-left">
      <div class="logo">ðŸ“ˆ</div>
      <div class="header-title">
        <h1>Centre de contrÃ´le de mission</h1>
        <p>Journalisation et diagnostics</p>
      </div>
    </div>
    <div class="header-right">

      <div class="status-badge" *ngIf="hasActiveMission; else noMission">
        <span>ðŸ”´</span>
        <span>
          Mission :
          {{ missionName || missionId }}
        </span>
      </div>

      <ng-template #noMission>
        <div class="status-badge">
          <span>âšª</span>
          <span>Aucune mission en direct</span>
        </div>
      </ng-template>

    </div>
  </div>

  <div class="tabs">
    <button
      class="tab"
      [class.active]="activeTab === 'live'"
      (click)="switchTab('live')"
    >
      ðŸ“¡ Surveillance
    </button>
    <button
      class="tab"
      [class.active]="activeTab === 'history'"
      (click)="switchTab('history')"
    >
      ðŸ“‚ Historique
    </button>
  </div>
</header>

<div class="mission-context" *ngIf="missionId">
  Logs affichÃ©s pour la mission <span>{{ missionId }}</span>
</div>

<div class="main-container">
  <main class="content">
    <!-- LIVE TAB -->
    <div *ngIf="activeTab === 'live'" class="tab-content">
      <h2 class="content-title">Flux en temps rÃ©el</h2>

      <div class="table-container">
        <table class="logs-table">
          <thead>
            <tr>
              <th class="col-time">Heure</th>
              <th class="col-robot">Robot</th>
              <th class="col-category">CatÃ©gorie</th>
              <th class="col-action">Action</th>
              <th class="col-details">DÃ©tails</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let log of liveData" class="log-row">
              <td class="col-time" data-label="Heure">
                <span class="time-badge">{{ log.timestamp }}</span>
              </td>
              <td class="col-robot" data-label="Robot">
                <div class="robot-cell">
                  <span class="robot-icon">ðŸš—</span>
                  <span class="robot-name-log">{{ log.robot }}</span>
                </div>
              </td>
              <td class="col-category" data-label="CatÃ©gorie">
                <span 
                  class="category-badge-log" 
                  [class.command]="log.category === 'Command'" 
                  [class.sensor]="log.category === 'Sensor'"
                >
                  {{ log.category }}
                </span>
              </td>
              <td class="col-action" data-label="Action">
                <span class="action-text">{{ log.action }}</span>
              </td>
              <td class="col-details" data-label="DÃ©tails">
                <div class="details-container">
                  <span class="detail-tag" *ngFor="let key of objectKeys(log.details)">
                    <span class="detail-key">{{ key }}</span>
                    <span class="detail-value">{{ log.details[key] }}</span>
                  </span>
                </div>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Ã‰TAT VIDE -->
        <div class="empty-state" *ngIf="liveData.length === 0">
          <div class="empty-icon">ðŸ“­</div>
          <div class="empty-title">Aucun log disponible</div>
          <div class="empty-text">Les Ã©vÃ©nements apparaÃ®tront ici en temps rÃ©el</div>
        </div>
      </div>

    </div>

    <!-- HISTORY TAB -->
    <div *ngIf="activeTab === 'history'" class="tab-content">
      <app-mission-list></app-mission-list>
    </div>
  </main>
</div>
