<!-- HEADER -->
<header class="header">
  <div class="header-top">
    <div class="header-left">
      <div class="logo">ðŸ“ˆ</div>
      <div class="header-title">
        <h1>Centre de contrÃ´le de mission</h1>
        <p>Journalisation et diagnostics</p>
      </div>
    </div>
    <div class="header-right">

      <div class="status-badge" *ngIf="hasActiveMission; else noMission">
        <span>ðŸ”´</span>
        <span>
          Mission :
          {{ missionName || missionId }}
        </span>
      </div>

      <ng-template #noMission>
        <div class="status-badge">
          <span>âšª</span>
          <span>Aucune mission en direct</span>
        </div>
      </ng-template>

    </div>
  </div>

  <div class="tabs">
    <button
      class="tab"
      [class.active]="activeTab === 'live'"
      (click)="switchTab('live')"
    >
      ðŸ“¡ Surveillance
    </button>
    <button
      class="tab"
      [class.active]="activeTab === 'history'"
      (click)="switchTab('history')"
    >
      ðŸ“‚ Historique
    </button>
  </div>
</header>

<div class="mission-context" *ngIf="missionId">
  Logs affichÃ©s pour la mission <span>{{ missionId }}</span>
</div>

<div class="main-container">
  <main class="content">
    <!-- LIVE TAB -->
    <div *ngIf="activeTab === 'live'" class="tab-content">
      <h2 class="content-title">Flux en temps rÃ©el</h2>

      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Heure</th>
              <th>Robot</th>
              <th>CatÃ©gorie</th>
              <th>Action</th>
              <th>DÃ©tails</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let log of liveData">
              <td class="timestamp">{{ log.timestamp }}</td>
              <td class="robot-name">{{ log.robot }}</td>
              <td>
                <span class="command-badge">{{ log.category }}</span>
              </td>
              <td>{{ log.action }}</td>
              <td class="details">
                <table>
                  <tr *ngFor="let key of objectKeys(log.details)">
                    <td style="padding-right: 1rem; color: #6b7280;">
                      {{ key }}
                    </td>
                    <td
                      style="
                        font-family: 'Courier New', monospace;
                        color: #1f2937;
                      "
                    >
                      {{ log.details[key] }}
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- HISTORY TAB -->
    <div *ngIf="activeTab === 'history'" class="tab-content">
      <app-mission-list></app-mission-list>
    </div>
  </main>
</div>
